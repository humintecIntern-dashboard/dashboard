<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.humintecTest.dashboard.dao.StorageFreeDao">
    <select id = "selectStorageFree" parameterType="StorageFreeVo" resultType="StorageFreeVo">
        select date,
               storage_name,
               daily_sum as daily_used,
               abs(total-daily_sum) as free,
               total
        from storage_per_date
    </select>
    <insert id = "insertStorageFree" parameterType="StorageFreeVo">
        insert into
            storage_free(date, storage_name,daily_used, free, total)
        values
            (#{date},#{storage_name},#{daily_used},#{free},#{total})
    </insert>
    <delete id = "deleteStorageFree">
        truncate
            storage_free
    </delete>
    <select id="searchStorageFree" parameterType="StorageFreeVo" resultType="StorageFreeVo">
        select *
        from storage_free
        where date between #{start_date} and #{end_date}
    </select>
</mapper>